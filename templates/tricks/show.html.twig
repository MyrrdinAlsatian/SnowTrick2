{% extends 'base.html.twig' %}

{% block title %}
	{{trick.name}}
{% endblock %}

{% block body %}
	<style>
		.example-wrapper {
			margin: 1em auto;
			max-width: 800px;
			width: 95%;
			font: 18px / 1.5 sans-serif;
		}
		.example-wrapper code {
			background: #F5F5F5;
			padding: 2px 6px;
		}
	</style>
	<div
		class="example-wrapper">
		<div
			class="card mb-3">
			<div
				class="position-relative">
				<h3
					class="position-absolute top-50 start-50 translate-middle">

					{{ trick.name}}
				</h3>

				<img
					src={{ asset('placeholder.png') }} alt="{{trick.name}}" class="w-100"
					alt="{{trick.name}}"/>
			</div>

			<!-- Start Carousel -->
			 {% if (images) or (videos) is defined %}
				<div
					class="row d-none d-lg-flex load-media">
					<div
						class="col-lg-6 col-md-12">
						{% if images is not empty %}
						<div
							class="glide glideImage">
							<div
								class="glide__track"
								data-glide-el="track">
								<ul
									class="glide__slides">
									{% for image in images %}
									<li
										class="glide__slide">
									<img class="w-100"
										src="{{asset(image.path, 'uploads')}}"/>

									</li>
									{% endfor %}
								</ul>
							</div>
							<div class="glide__arrows" data-glide-el="controls">
								<button class="glide__arrow glide__arrow--left" data-glide-dir="<"><</button>
								<button class="glide__arrow glide__arrow--right" data-glide-dir=">">></button>
							</div>
						</div>
						{% else %}
						<div
							class="row justify-content-center">
							<div
								class="d-inline-block text-center no-medias">
								<p
									class="mt-3 ml-3 mr-3">
									Pas d'images pour ce trick
								</p>
							</div>
						</div>

						{% endif %}
					</div>
					{% if videos != [] %}
						<div
							class="col-lg-6 col-md-12">
							<div
								class="glide glideVideo">
								<div
									class="glide__track"
									data-glide-el="track">
									<ul
										class="glide__slides">
										{% for video in videos %}
											<li
												class="glide_slide">
												<iframe
													class
													width="100%"
													height="315"
													src="{{ embedUrl(video.url) }}"
													title="YouTube video player"
													frameborder="0"
													allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
													allowfullscreen></iframe>

											</li>
										{% endfor %}

									</ul>
								</div>
							<div class="glide__arrows" data-glide-el="controls">
								<button class="glide__arrow glide__arrow--left" data-glide-dir="<"><</button>
								<button class="glide__arrow glide__arrow--right" data-glide-dir=">">></button>
							</div>

							</div>
							{% else %}
							<div
								class="row justify-content-center">
								<div
									class="d-inline-block text-center no-medias">
									<p
										class="mt-3 ml-3 mr-3">
										Pas de videos pour ce trick
									</p>
								</div>
							</div>

					{% endif %}
				</div>
				<div
					class="text-center">
					<a
						href="#"
						id="loadMedia"
						class="d-md-block d-lg-none">
						<button
							class="btn btn-outline-secondary">
							Afficher les médias
						</button>
					</a>
					<a
						href="#"
						id="hideMedia"
						class="d-none d-md-none d-lg-none">
						<button
							class="btn btn-outline-secondary mt-3">
							Masquer les médias
						</button>
					</a>
				</div>
			{% else %}
				<div
					class="row justify-content-center">
					<div
						class="d-inline-block text-center no-medias">
						<p
							class="mt-3 ml-3 mr-3">
							Pas de médias pour ce trick
						</p>
					</div>
				</div>
			{% endif %}
			<!-- End Carousel -->
			<div
				class="card-body pb-0">
				<table
					class="table text-center table-hover">
					<thead>
						<tr>
							<th
								scope="col">
								Catégorie
							</th>
							<th
								scope="col">
								Publié
							</th>
							{% if trick.updateAt is defined %}


								<th
									scope="col">
									Modifié
								</th>
							{%	 endif %}
							<th
								scope="col">
								Auteur
							</th>
						</tr>
					</thead>
					<tbody>

						<tr
							class="table-primary">
							<th
								scope="row">
								{{trick.category}}

							</th>
							<td>
								{{trick.createdAt|date('Y-m-d H:i')}}


							</td>
							{% if trick.updateAt is defined %}

								<td>
									{{trick.updatedAt|date('Y-m-d H:i')}}
								</td>

							{% endif %}

							<td>
								{{trick.getUser()}}
							</td>
						</tr>
					</tbody>
				</table>


			</div>

			<div
				class="card-body pt-0">
				<p
					class="card-text">
					{{trick.description}}
				</p>
			</div>
			<div
				class="card-footer">

				{% if is_granted('ROLE_USER') %}
					{{ form_start(form) }}
					{{ form_widget(form) }}
					<button
						class="btn btn-primary">
						{{ button_label|default('Envoyer') }}
					</button>
					{{ form_end(form) }}
				{% else %}
					<p>
						Veuillez vous
						<a
							href="{{path('app_login')}}">
							connecter
						</a>
					</p>
				{% endif %}
			</div>
			<div>
				<ul
					class="list-group">
					{% for comment in comments %}
						<li
							class="list-group-item d-flex justify-content-between align-items-center">
							<span
								class="badge bg-primary rounded-pill">
								{{ comment.getUserId()}}
							</span>
							{{ comment.content}}
							<span
								class="badge bg-secondary rounded-pill">
								{{comment.createdAt.format('Y:M:D')}}
							</li>
						{% endfor %}
					</ul>

				</div>
			</div>
		</div>


	</div>

    <a href="{{ path('app_tricks_index') }}">back to list</a>

    <a href="{{ path('app_tricks_edit', {'id': trick.id}) }}">edit</a>

    {{ include('tricks/_delete_form.html.twig') }}
	{% block javascripts %}
		{{ encore_entry_script_tags('app') }}
		{{ encore_entry_script_tags('slider') }}
	{% endblock %}


{% endblock %}
