{% extends 'base.html.twig' %}

{% block title %}
	{{trick.name}}
{% endblock %}

{% block body %}
	<style>
		.example-wrapper {
			margin: 1em auto;
			max-width: 800px;
			width: 95%;
			font: 18px / 1.5 sans-serif;
		}
		.example-wrapper code {
			background: #F5F5F5;
			padding: 2px 6px;
		}
	</style>
	<div
		class="example-wrapper">
		<div
			class="card mb-3">
			<div
				class="position-relative">
				<h3
					class="position-absolute top-50 start-50 translate-middle">

					{{ trick.name}}
				</h3>

				{# <img
					src={{ asset(trick.getImageId(), 'uploaded') }} alt="{{trick.name}}" class="w-100"
					alt="{{trick.name}}"/> #}
			</div>

			<!-- Start Carousel -->
			 {% if (images) or (videos) is defined %}
				<div
					class="row d-none d-lg-flex load-media">
					<div
						class="col-lg-6 col-md-12">
						<div
							id="carousel"
							class="carousel slide mt-3 mb-2"
							data-ride="carousel">
							<ol
								class="carousel-indicators">
								{% for image in images %}
									<li
										data-target=".carousel"
										data-slide-to="{{ loop.index0 }}" {% if loop.index0 == 0 %} class="active"
										{% endif %}></li>
								{% endfor %}
							</ol>
							<div
								class="carousel-inner enlarge">
								{% for image in images %}
									<div
										class="carousel-item {% if loop.index0 == 0 %} active {% endif %}">
										<img
											class="d-block img-fluid"
											src="
																												{{ asset(image.path,'uploads') }}
																												"

											alt="{{ trick.name }}-image-{{ image.id }}">
									</div>
								{% endfor %} 
							</div>
							<a
								class="carousel-control-prev"
								href="#carousel"
								data-slide="prev">
								<span
									class="carousel-control-prev-icon"></span>
							</a>
							<a
								class="carousel-control-next"
								href="#carousel"
								data-slide="next">
								<span
									class="carousel-control-next-icon"></span>
							</a>
						</div>
					</div>
					{% if videos != [] %}
						<div
							class="col-lg-6 col-md-12">
							<div
								id="carousel-v"
								class="carousel slide mt-3 mb-2"
								data-ride="carousel">
								<ol
									class="carousel-indicators">
									{% for video in videos %}
										<li
											data-target="#carousel-v"
											data-slide-to="{{ loop.index0 }}" {% if loop.index0 == 0 %} class="active"
											{% endif %}></li>
									{% endfor %}
								</ol>
								<div
									class="carousel-inner">
									{% for video in videos %}
										<div
											class="carousel-item {% if loop.index0 == 0 %} active {% endif %}">
											<iframe
												width="560"
												height="315"
												src="{{ video.path }}" title="YouTube video player"
												frameborder="0"
												allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
												allowfullscreen></iframe>

										</div>
									{% endfor %}
								</div>
								<a
									class="carousel-control-prev"
									href="#carousel-v"
									data-slide="prev">
									<span
										class="carousel-control-prev-icon"></span>
								</a>
								<a
									class="carousel-control-next"
									href="#carousel-v"
									data-slide="next">
									<span
										class="carousel-control-next-icon"></span>
								</a>
							</div>
						</div>
					{% endif %}
				</div>
				<div
					class="text-center">
					<a
						href="#"
						id="loadMedia"
						class="d-md-block d-lg-none">
						<button
							class="btn btn-outline-secondary">
							Afficher les médias
						</button>
					</a>
					<a
						href="#"
						id="hideMedia"
						class="d-none d-md-none d-lg-none">
						<button
							class="btn btn-outline-secondary mt-3">
							Masquer les médias
						</button>
					</a>
				</div>
			{% else %}
				<div
					class="row justify-content-center">
					<div
						class="d-inline-block text-center no-medias">
						<p
							class="mt-3 ml-3 mr-3">
							Pas de médias pour ce trick
						</p>
					</div>
				</div>
			{% endif %}
			<!-- End Carousel -->
			<div
				class="card-body pb-0">
				<table
					class="table text-center table-hover">
					<thead>
						<tr>
							<th
								scope="col">
								Catégorie
							</th>
							<th
								scope="col">
								Publié
							</th>
							{% if trick.updateAt is defined %}


								<th
									scope="col">
									Modifié
								</th>
							{%	 endif %}
							<th
								scope="col">
								Auteur
							</th>
						</tr>
					</thead>
					<tbody>

						<tr
							class="table-primary">
							<th
								scope="row">
								{{trick.category}}

							</th>
							<td>
								{{trick.createdAt|date('Y-m-d H:i')}}


							</td>
							{% if trick.updateAt is defined %}

								<td>
									{{trick.updatedAt|date('Y-m-d H:i')}}
								</td>

							{% endif %}

							<td>
								{{trick.getUser()}}
							</td>
						</tr>
					</tbody>
				</table>


			</div>

			<div
				class="card-body pt-0">
				<p
					class="card-text">
					{{trick.description}}
				</p>
			</div>
			<div
				class="card-footer">

				{% if is_granted('ROLE_USER') %}
					{{ form_start(form) }}
					{{ form_widget(form) }}
					<button
						class="btn btn-primary">
						{{ button_label|default('Envoyer') }}
					</button>
					{{ form_end(form) }}
				{% else %}
					<p>
						Veuillez vous
						<a
							href="{{path('app_login')}}">
							connecter
						</a>
					</p>
				{% endif %}
			</div>
			<div>
				<ul
					class="list-group">
					{% for comment in comments %}
						<li
							class="list-group-item d-flex justify-content-between align-items-center">
							<span
								class="badge bg-primary rounded-pill">
								{{ comment.getUserId()}}
							</span>
							{{ comment.content}}
							<span
								class="badge bg-secondary rounded-pill">
								{{comment.createdAt.format('Y:M:D')}}
							</li>
						{% endfor %}
					</ul>

				</div>
			</div>
		</div>


	</div>

    <a href="{{ path('app_tricks_index') }}">back to list</a>

    <a href="{{ path('app_tricks_edit', {'id': trick.id}) }}">edit</a>

    {{ include('tricks/_delete_form.html.twig') }}
{% endblock %}
